(this["webpackJsonpwatch-cat"]=this["webpackJsonpwatch-cat"]||[]).push([[0],{20:function(e){e.exports=JSON.parse('["","&","a","and","at","for","i","in","is","it","my","of","on","the","to","with","you","your"]')},25:function(e,t,n){},26:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(9),i=n.n(a),o=(n(25),n(5)),s=n(10),d=n(11),l=n(13),h=n(12),u=(n(26),n(18)),j=n(3),b=n(2),O=n(20),v=n(6),f=Object(v.b)({name:"videos",initialState:{videos:[]},reducers:{setVideoList:function(e,t){e.videos=t.payload},addVideos:function(e,t){e.videos=[].concat(Object(o.a)(e.videos),Object(o.a)(t.payload))}}}),m=f.actions,x=m.setVideoList,p=(m.addVideos,function(e){return e.videos.videos}),w=f.reducer,y=n(0);function k(e){if(e){var t,n,c,r,a=e.split(":");switch(a.length){case 2:var i=Object(b.a)(a,2);c=i[0],r=i[1],t="".concat(c,"M").concat(r,"S");break;case 3:var o=Object(b.a)(a,3);n=o[0],c=o[1],r=o[2],t="".concat(n,"H").concat(c,"M").concat(r,"S")}return"PT".concat(t)}console.debug("No duration on this video")}function g(e){var t=e.video,n=t.duration,c=t.watched;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("time",{dateTime:k(n),children:n})," ",c&&Object(y.jsx)("span",{"aria-label":"Watched video",children:"\ud83d\udc41 "})]})}function N(e){return"https://www.youtube.com/watch?v=".concat(e)}function C(e){var t=Object(j.c)((function(t){return function(e,t){return e.videos.videos.find((function(e){return e.video.title===t}))}(t,e.videoTitle)})).video;return Object(y.jsx)(S,{children:e.children,video:t,showDuration:e.showDuration})}function T(e){return Object(j.c)((function(t){return function(e,t){return e.videos.videos.filter((function(e){return e.video.title.toLowerCase().includes(t)}))}(t,e.searchTerm)})).map((function(t,n){var c=t.video;return Object(y.jsx)(S,{children:e.children,video:c,showDuration:e.showDuration},n)}))}function S(e){var t=e.video,n=t.title,c=t.id,r=e.showDuration;return Object(y.jsxs)("div",{children:[r&&Object(y.jsx)(g,{video:e.video}),Object(y.jsx)("a",{href:N(c),children:n}),e.children]})}function L(e){var t=function(e,t,n){return Object.entries(e).filter((function(e){var c=Object(b.a)(e,2),r=c[0],a=c[1];return!t.includes(r)&&a>=n})).sort((function(e,t){var n=Object(b.a)(e,2)[1];return Object(b.a)(t,2)[1]-n}))}(e.words,O,10),n=Object(c.useState)(t[0][0]),r=Object(b.a)(n,2),a=r[0],i=r[1];return Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{id:"commonWords",children:"Common words from video titles"}),Object(y.jsx)("div",{className:"grid gap-2r mb1",onClick:function(e){var t=e.target.dataset.word;i(t)},children:t.map((function(e,t){var n=Object(b.a)(e,2),c=n[0],r=n[1];return Object(y.jsxs)("button",{className:"button m0","data-word":c,type:"button",children:[Object(y.jsx)("strong",{children:c})," - ",r]},t)}))}),Object(y.jsx)(T,{searchTerm:a,showDuration:!0})]})}var V=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"attributeNames",value:function(){return Object.keys(this.props.data[0])}},{key:"renderRow",value:function(e,t,n){return Object(y.jsx)("tr",{children:t.map((function(t,n){return Object(y.jsx)("td",{children:e[t]},n)}))},n)}},{key:"renderHeaderRow",value:function(){return this.props.headers.map((function(e,t){return Object(y.jsx)("th",{children:e},t)}))}},{key:"renderTHeadAndTFoot",value:function(){var e=this.renderHeaderRow();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("thead",{children:Object(y.jsx)("tr",{children:e})}),Object(y.jsx)("tfoot",{children:Object(y.jsx)("tr",{children:e})})]})}},{key:"renderTBody",value:function(e){var t=this;return Object(y.jsx)("tbody",{children:this.props.data.map((function(n,c){return t.renderRow(n,e,c)}))})}},{key:"render",value:function(){var e=this.attributeNames();return Object(y.jsxs)("table",{children:[this.renderTHeadAndTFoot(e),this.renderTBody(e)]})}}]),n}(r.a.Component);function W(e,t){return"https://www.youtube.com/".concat(e,"/").concat(t)}function D(e){var t=e.channel,n=t.name,c=t.type,r=t.id;return Object(y.jsx)("div",{children:Object(y.jsx)("a",{href:W(c,r),children:n})})}var q=function(e){return e.map((function(e){var t=e.video,n=e.channel;return[Object(y.jsx)(S,{video:t}),Object(y.jsx)(g,{video:t}),Object(y.jsx)(D,{channel:n})]}))};function A(){var e=Object(j.c)(p);return Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{id:"videos",children:"Your Videos"}),Object(y.jsx)(V,{headers:["Video","Duration","Channel"],data:q(e)})]})}var F=Object(v.b)({name:"channels",initialState:{channels:[]},reducers:{setChannelList:function(e,t){var n=t.payload,c=Object.entries(n).sort((function(e,t){var n=Object(b.a)(e,2)[1],c=Object(b.a)(t,2)[1];return n.length-c.length}));e.channels=c},addChannels:function(e,t){e.videos=[].concat(Object(o.a)(e.videos),Object(o.a)(t.payload))}}}),I=F.actions,Y=I.setChannelList,B=(I.addChannels,function(e){return e.channels.channels.filter((function(e){return 1===Object(b.a)(e,2)[1].length}))}),H=function(e){return e.channels.channels.filter((function(e){return Object(b.a)(e,2)[1].length>1}))},R=F.reducer;function J(){var e=Object(y.jsx)("ul",{children:Object(j.c)(B).map((function(e,t){var n=Object(b.a)(e,2),c=n[0],r=n[1];return Object(y.jsx)("li",{children:Object(y.jsx)(C,{videoTitle:r[0],children:Object(y.jsxs)("span",{children:[" by ",c]})})},t)}))}),t=Object(j.c)(H).map((function(e,t){var n=Object(b.a)(e,2),c=n[0],r=n[1];return Object(y.jsxs)("details",{open:!0,className:"mv2 multiVideoChannel",children:[Object(y.jsx)("summary",{className:"mb1",children:Object(y.jsxs)("h4",{className:"inline",children:["[x",r.length,"] ",c]})}),Object(y.jsx)("ul",{children:r.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsx)(C,{videoTitle:e,showDuration:!0})},t)}))})]},t)})),n=function(e,t,n){document.querySelectorAll(e).forEach((function(e){return e[t]=n}))};return Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{id:"channels",children:"Your Channels"}),Object(y.jsxs)("div",{className:"flex flex-equal gap-5r",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"mt0",children:"Channels with only one video"}),e]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"mt0",children:"Channels with multiple videos"}),Object(y.jsxs)("div",{className:"flex justify-evenly",children:[Object(y.jsx)("button",{type:"button",className:"button m0",onClick:function(){n(".multiVideoChannel","open",!0)},children:"Open all channel lists"}),Object(y.jsx)("button",{type:"button",className:"button m0",onClick:function(){n(".multiVideoChannel","open",!1)},children:"Close all channel lists"})]}),t]})]})]})}function M(e){var t=Object(j.b)(),n=function(e){if(e)return e.reduce((function(e,t){var n=e.channels,c=e.wordFreq,r=Object.keys(n),a=t.video,i=t.channel,o=a.title,s=i.name;r.includes(s)?n[s].push(o):n[s]=[o];var d,l=o.toLowerCase().replaceAll(/[+?|~/()!,[\]\u2014:]|\s-\s|\.+/g," ").split(" "),h=Object(u.a)(l);try{for(h.s();!(d=h.n()).done;){var j=d.value,b=c[j]||0;c[j]=b+1}}catch(O){h.e(O)}finally{h.f()}return e.channels=n,e.videos.push(t),e.wordFreq=c,e}),{channels:{},videos:[],wordFreq:{}})}(e.videos);if(!n)return null;var c=n.videos,r=n.channels,a=n.wordFreq;return t(x(c)),t(Y(r)),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(L,{words:a}),Object(y.jsx)(J,{}),Object(y.jsx)(A,{})]})}var E="\njavascript:( function(){\n\t".concat("\nconst sc = document.createElement('script');\nsc.src = 'https://andrewstanton94.github.io/watchCat/bookmarklet.js';\ndocument.querySelector('head').append(sc);\n","\n})();\n").replace(/\\n|\\t/,""),P=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={hash:void 0,addNewVideosLabel:"Add new videos"},c}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=document.location.hash;if(e.length){var t=decodeURIComponent(e.slice(1)),n=JSON.parse(t);this.setState({hash:n}),document.querySelector("body").classList.add("has-data")}}},{key:"appendNewWatchListItems",value:function(e){e.preventDefault();var t=document.querySelector("#additionalWatchList");try{var n=JSON.parse(t.value);this.setState({hash:[].concat(Object(o.a)(this.state.hash),Object(o.a)(n))}),t.value="",this.setState({addNewVideosLabel:"Videos added"})}catch(c){console.warn(c)}}},{key:"loadDataFromClipboard",value:function(){var e=document.querySelector("#additionalWatchList");navigator.clipboard.readText().then((function(t){return e.value=t}))}},{key:"jumpToId",value:function(e){var t=e.target.dataset.href;document.querySelector(t).scrollIntoView()}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsxs)("header",{className:"App-header flex justify-evenly",children:[Object(y.jsxs)("div",{className:"flex flex-column",children:[Object(y.jsx)("h1",{children:"watchCat"}),Object(y.jsx)("p",{children:"Make sense of your YouTube Watch later list"})]}),Object(y.jsx)("img",{src:"/watchCat/logo.svg",alt:"logo"})]}),Object(y.jsxs)("div",{id:"first-run",className:"flex flex-equal gap-5r ",children:[Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{children:"Set up"}),Object(y.jsx)("p",{children:"You need to add a bookmarklet (a bookmark that runs some code) to your browser. Drag the button to your bookmark bar to save it."}),Object(y.jsx)("div",{className:"flex flex-center",children:Object(y.jsx)("a",{className:"button",href:E,children:"YouTube Watch later bookmarklet"})}),Object(y.jsxs)("p",{children:["I know this isn't an elegant solution but the"," ",Object(y.jsx)("a",{href:"https://developers.google.com/youtube/v3/revision_history#january-28,-2021",rel:"no-opener no-referrer",children:"YouTube API has been broken for a while and will not be fixed."})]})]}),Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{children:"How this works"}),Object(y.jsxs)("ol",{children:[Object(y.jsxs)("li",{children:["Go to your"," ",Object(y.jsx)("a",{href:"https://www.youtube.com/playlist?list=WL",children:"YouTube Watch later list"})]}),Object(y.jsx)("li",{children:"Scroll down to the bottom of the page. This ensures all the videos are loaded."}),Object(y.jsxs)("li",{children:["Then click the bookmarklet link. The code looks at all the URLs in the list to find the:",Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:"Video link"}),Object(y.jsx)("li",{children:"Video Name"}),Object(y.jsx)("li",{children:"Video duration"}),Object(y.jsx)("li",{children:"Channel"})]})]}),Object(y.jsx)("li",{children:"The script opens this app with the video information"})]})]})]}),Object(y.jsxs)("div",{id:"data",children:[Object(y.jsx)("nav",{className:"p2",onClick:this.jumpToId,children:Object(y.jsxs)("ul",{className:"flex list-none justify-evenly p0",children:[Object(y.jsx)("p",{"data-href":"#add",children:"Add more videos"}),Object(y.jsx)("p",{"data-href":"#commonWords",children:"Common words"}),Object(y.jsx)("p",{"data-href":"#channels",children:"Your Channels"}),Object(y.jsx)("p",{"data-href":"#videos",children:"Your Videos"})]})}),Object(y.jsxs)("section",{children:[Object(y.jsx)("h2",{id:"add",children:"Add more videos"}),Object(y.jsx)("form",{onSubmit:this.appendNewWatchListItems.bind(this),children:Object(y.jsxs)("fieldset",{className:"flex flex-column",children:[Object(y.jsx)("legend",{children:"Paste the rest of your Watch list in here"}),Object(y.jsx)("button",{type:"button",onClick:this.loadDataFromClipboard,className:"button m2",children:"Load data from the clipboard"}),Object(y.jsx)("textarea",{id:"additionalWatchList",rows:"10",className:"m2"}),Object(y.jsx)("button",{className:"button m2",children:this.state.addNewVideosLabel})]})})]}),Object(y.jsx)(M,{videos:this.state.hash})]})]})}}]),n}(r.a.Component),U=Object(v.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),G=U.actions,$=(G.increment,G.decrement,G.incrementByAmount,U.reducer),_=Object(v.a)({reducer:{counter:$,videos:w,channels:R}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(j.a,{store:_,children:Object(y.jsx)(P,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.db6a8db5.chunk.js.map